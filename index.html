<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Planificador semanal de ingl√©s</title>
  <style>
    :root{
      --bg:#0b1220; --card:#121a2b; --muted:#6b7a90; --text:#eaf1ff; --accent:#4cc9f0;
      --border:#1e293b; --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Inter,Ubuntu,Arial;background:var(--bg);color:var(--text)}
    header{max-width:1200px;margin:24px auto 0;padding:0 16px}
    h1{margin:8px 0 6px}
    .sub{color:var(--muted)}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0 22px}
    button{background:#1f2b45;color:var(--text);border:1px solid var(--border);padding:8px 12px;border-radius:8px;cursor:pointer}
    .overall{max-width:1200px;margin:0 auto 10px;padding:0 16px;display:flex;gap:12px;align-items:center}
    .grid{max-width:1200px;margin:0 auto;padding:0 16px 60px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(270px,1fr))}
    .day{background:var(--card);border:2px solid var(--border);border-radius:var(--radius);padding:12px;display:flex;flex-direction:column;gap:10px;transition:border 0.3s}
    .day.today{border:3px solid var(--accent)}
    .tasks{display:flex;flex-direction:column;gap:10px}
    .task{display:flex;gap:10px;border:1px solid var(--border);border-radius:8px;padding:8px;background:rgba(255,255,255,0.02)}
    .task a{color:#a5d8ff}
    .badge{font-size:.8rem;padding:2px 6px;border:1px solid var(--border);border-radius:6px;color:var(--muted)}
    .quizbar{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .quiz-btn{padding:6px 10px}
    .reading{border:1px solid var(--border);border-radius:8px;padding:8px;background:rgba(255,255,255,.02)}
    .reading h4{margin:0 0 6px 0}
    .reading p{margin:0;color:var(--muted)}
    .reading-links{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
    .reading-links a{background:#1f2b45;border:1px solid var(--border);padding:6px 10px;border-radius:8px;color:#a5d8ff;text-decoration:none;white-space:nowrap}
    .quiz-history{margin-top:10px;padding:6px;border:1px solid var(--border);border-radius:8px;max-height:120px;overflow:auto;font-size:0.9rem;color:var(--muted)}
    /* Modal */
    .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.6)}
    .modal.open{display:grid}
    .modal-card{width:min(720px,92vw);background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
    .modal-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .quiz-q{background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:8px;min-height:90px;display:flex;align-items:center;justify-content:center;text-align:center;padding:12px}
    .quiz-actions{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
    .quiz-extra{margin-top:10px;text-align:center;display:flex;flex-direction:column;gap:8px}
  </style>
</head>
<body>
  <header>
    <h1>Planificador semanal de ingl√©s ‚Äî IA & Self‚ÄëGrowth</h1>
    <p class="sub">Marca lo que vas completando. Tu progreso se guarda autom√°ticamente en este navegador.</p>
    <div class="toolbar">
      <button id="resetBtn">üîÑ Reiniciar semana</button>
      <button id="completeTodayBtn">‚úÖ Completar HOY</button>
    </div>
  </header>
  <section class="overall">
    <progress id="overallProgress" max="100" value="0" aria-label="Progreso semanal"></progress>
    <span id="overallPct">0%</span>
  </section>
  <main class="grid" id="grid"></main>

  <!-- Quiz Modal -->
  <div class="modal" id="quizModal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="quizTitle">
      <div class="modal-head">
        <h3 id="quizTitle">Quiz ‚Äî Phrasals & False Friends</h3>
        <button id="closeQuiz" aria-label="Cerrar">‚úñ</button>
      </div>
      <div class="quiz-q" id="quizQuestion">Question‚Ä¶</div>
      <div class="quiz-actions">
        <button id="optA">A</button>
        <button id="optB">B</button>
      </div>
      <div class="quiz-extra">
        <button id="shuffleQuiz">üîÄ Shuffle Questions</button>
        <button id="nextQuiz">‚û°Ô∏è Next</button>
      </div>
      <div id="quizFeedback" style="margin-top:8px"></div>
    </div>
  </div>

  <!-- Templates -->
  <template id="dayTemplate">
    <section class="day" data-day="">
      <header>
        <h3></h3>
        <span class="badge"><span class="done">0</span>/<span class="total">0</span></span>
        <span class="badge" data-quiz-info>0/0</span>
      </header>
      <div class="quizbar">
        <button class="quiz-btn" data-open-quiz>üß† Quiz</button>
      </div>
      <div class="reading">
        <h4>üìñ Quick reading</h4>
        <p class="reading-summary"></p>
        <div class="reading-links"></div>
      </div>
      <div class="tasks"></div>
      <div class="quiz-history" data-history></div>
    </section>
  </template>

  <template id="taskTemplate">
    <div class="task">
      <input type="checkbox" />
      <div>
        <div><strong class="title"></strong> <span class="kind"></span></div>
        <a class="link" href="#" target="_blank" rel="noopener">Abrir recurso</a>
      </div>
    </div>
  </template>  <script>
    // Mappings for book-topic podcasts on YouTube and AI/Data videos per day
    const PODCAST_YT = {
      Monday:  {label:"Rich Dad Poor Dad (YouTube)",     url:"https://www.youtube.com/results?search_query=rich+dad+poor+dad+summary+english"},
      Tuesday: {label:"Atomic Habits (YouTube)",         url:"https://www.youtube.com/results?search_query=atomic+habits+summary+english"},
      Wednesday:{label:"7 Habits of Highly Effective People (YouTube)", url:"https://www.youtube.com/results?search_query=7+habits+of+highly+effective+people+summary+english"},
      Thursday:{label:"Thinking, Fast and Slow (YouTube)",url:"https://www.youtube.com/results?search_query=thinking+fast+and+slow+summary+english"},
      Friday:  {label:"Secrets of the Millionaire Mind (YouTube)", url:"https://www.youtube.com/results?search_query=secrets+of+the+millionaire+mind+summary+english"},
      Saturday:{label:"Self‚ÄëGrowth / Productivity (YouTube)", url:"https://www.youtube.com/results?search_query=self+improvement+podcast+english"},
      Sunday:  {label:"AI & Money (YouTube)",            url:"https://www.youtube.com/results?search_query=ai+and+money+podcast"}
    };

    const AI_VIDEO = {
      Monday:  {label:"AI News & Tools",   url:"https://www.youtube.com/@mattvidpro"},
      Tuesday: {label:"Data Science",      url:"https://www.youtube.com/@KenJee1"},
      Wednesday:{label:"AI Tools Roundups",url:"https://www.youtube.com/@FutureTools"},
      Thursday:{label:"Automation (Make)", url:"https://www.youtube.com/@MakeHQ"},
      Friday:  {label:"AI Agents",         url:"https://www.youtube.com/@aiexplained-official"},
      Saturday:{label:"Machine Learning",   url:"https://www.youtube.com/@3blue1brown"},
      Sunday:  {label:"Tech & AI Stories", url:"https://www.youtube.com/@ColdFusion"}
    };

const SHARED_QUIZ=[
      {q:"What does 'give up' mean?",a:"Surrender",b:"Continue",correct:"a",example:"He decided to give up smoking after 10 years."},
      {q:"What does 'pick up' mean?",a:"Collect",b:"Drop",correct:"a",example:"Can you pick up the kids from school today?"},
      {q:"False friend: 'Actual' means‚Ä¶",a:"Current",b:"Real",correct:"a",example:"The actual price is higher than expected."},
      {q:"What does 'run out of' mean?",a:"Exhaust supply",b:"Replenish",correct:"a",example:"We ran out of milk this morning."},
      {q:"False friend: 'Library' means‚Ä¶",a:"Bookstore",b:"Public book collection",correct:"b",example:"I borrowed three books from the library."}
      // ... m√°s preguntas con sus ejemplos
    ];

    const QUIZ={Monday:SHARED_QUIZ,Tuesday:SHARED_QUIZ,Wednesday:SHARED_QUIZ,Thursday:SHARED_QUIZ,Friday:SHARED_QUIZ,Saturday:SHARED_QUIZ,Sunday:SHARED_QUIZ};

    let state={quizScores:{},histories:{}};
    function saveState(s){localStorage.setItem('planner_state',JSON.stringify(s));}
    function loadState(){return JSON.parse(localStorage.getItem('planner_state')||'{}');}
    state=loadState();

    function render(){
      const grid=document.getElementById('grid');
      grid.innerHTML='';
      const today=new Date().toLocaleDateString('en-US',{weekday:'long'});
      ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].forEach(day=>{
        const template=document.getElementById('dayTemplate');
        const card=template.content.firstElementChild.cloneNode(true);
        card.dataset.day=day;
        card.querySelector('h3').textContent=day;

        if(day===today){card.classList.add('today');}

        // Reading
        card.querySelector('.reading-summary').textContent="English blogs about making money with AI.";
        const linksWrap=card.querySelector('.reading-links');
        const links=[
          {label:"RightBlogger",url:"https://rightblogger.com/blog/make-money-ai"},
          {label:"Medium (YouTube Automation)",url:"https://medium.com/@hazelparadise/7-ways-i-am-making-money-from-youtube-automation-839efac45bb5"},
          {label:"PlainEnglish (12 AI Tools)",url:"https://ai.plainenglish.io/i-tested-12-ai-tools-to-earn-money-online-heres-the-one-that-surprised-me-most-68c4e4eba576"},
          {label:"GoDaddy Blog",url:"https://www.godaddy.com/resources/skills/how-to-make-money-with-ai"}
        ];
        links.forEach(lk=>{
          const a=document.createElement('a');a.href=lk.url;a.textContent=lk.label;a.target='_blank';linksWrap.appendChild(a);
        });

        // Tasks (per-day specific)
        const tasksWrap=card.querySelector('.tasks');
        const podcast = PODCAST_YT[day];
        const ai = AI_VIDEO[day];
        const tasks=[
          {title:"üé¨ Series",kind:"Listening",url:"https://www.netflix.com"},
          {title:`üéß Podcast: ${podcast.label}`,kind:"Podcast",url:podcast.url},
          {title:`üé• YouTube: ${ai.label}`,kind:"YouTube",url:ai.url},
          {title:"üó£Ô∏è Speaking with ChatGPT (Voice)",kind:"Speaking",url:"https://chat.openai.com"}
        ];
        tasks.forEach(task=>{
          const taskTemplate=document.getElementById('taskTemplate');
          const taskNode=taskTemplate.content.firstElementChild.cloneNode(true);
          taskNode.querySelector('.title').textContent=task.title;
          taskNode.querySelector('.kind').textContent=task.kind;
          taskNode.querySelector('.link').href=task.url;
          tasksWrap.appendChild(taskNode);
        });

        // Quiz button
        card.querySelector('[data-open-quiz]').onclick=()=>openQuiz(day);

        // Historial
        renderHistory(day,card);

        grid.appendChild(card);
      });
    }

    function openQuiz(day){
      const list=QUIZ[day]||[];
      if(!list.length) return;
      let qIndex=0;let correct=0;let order=[...Array(list.length).keys()];
      const modal=document.getElementById('quizModal');
      const qEl=document.getElementById('quizQuestion');
      const optA=document.getElementById('optA');
      const optB=document.getElementById('optB');
      const feedback=document.getElementById('quizFeedback');
      const closeBtn=document.getElementById('closeQuiz');
      const shuffleBtn=document.getElementById('shuffleQuiz');
      const nextBtn=document.getElementById('nextQuiz');
      modal.classList.add('open');

      function showQ(){
        if(qIndex>=order.length){
          feedback.textContent=`Done! ${correct}/${order.length}`;
          state.quizScores[day]={correct,total:order.length};
          saveState(state);
          document.querySelector(`[data-day="${day}"] [data-quiz-info]`).textContent=`${correct}/${order.length}`;
          return;
        }
        const q=list[order[qIndex]];
        qEl.textContent=q.q;
        optA.textContent=q.a;optA.dataset.val='a';
        optB.textContent=q.b;optB.dataset.val='b';
        feedback.textContent='';
      }

      function choose(val){
        const q=list[order[qIndex]];
        if(val===q.correct){correct++;feedback.textContent='‚úÖ Correct. '+q.example;}
        else{feedback.textContent='‚ùå Not quite. '+q.example;}
        state.histories[day]=state.histories[day]||[];
        state.histories[day].push(feedback.textContent);
        saveState(state);
        renderHistory(day,document.querySelector(`[data-day="${day}"]`));
      }

      function next(){
        qIndex++;
        showQ();
      }

      optA.onclick=()=>choose('a');
      optB.onclick=()=>choose('b');
      nextBtn.onclick=()=>next();
      closeBtn.onclick=()=>modal.classList.remove('open');
      shuffleBtn.onclick=()=>{order.sort(()=>Math.random()-0.5);qIndex=0;correct=0;showQ();};

      showQ();
    }

    function renderHistory(day,card){
      const histDiv=card.querySelector('[data-history]');
      histDiv.innerHTML='';
      (state.histories?.[day]||[]).forEach(entry=>{
        const p=document.createElement('div');
        p.textContent=entry;
        histDiv.appendChild(p);
      });
    }

    render();
  </script>
</body>
</html>
